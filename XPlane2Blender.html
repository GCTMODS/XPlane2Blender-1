<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <meta content="X-Plane import/export scripts for Blender 3D"
 name="description">
  <meta content="X-Plane, simulator, scenery, Blender, Blender3D"
 name="keywords">
  <title>XPlane2Blender</title>
  <meta content="Jonathan Harris" name="author">
  <style type="text/css">
      div.banner { font-family: Arial,Helvetica,sans-serif; font-weight:
      bold; text-align: center; }
      samp { font-family: Arial,Helvetica,sans-serif; }
      h2 { font-family: Arial,Helvetica,sans-serif; text-align: center; }
      h3 { font-family: Arial,Helvetica,sans-serif; }
      h4 { font-family: Arial,Helvetica,sans-serif; }
  </style>
</head>
<body>
<table style="width: 100%; text-align: left;" cellpadding="0"
 cellspacing="2">
  <tbody>
    <tr>
      <td style="height: 32px; background-color: rgb(153, 204, 255);">
      <div class="banner">XPlane2Blender</div>
      </td>
    </tr>
  </tbody>
</table>
<hr style="width: 100%; height: 2px;">
<h2>Scenery &amp; Cockpit import/export scripts for Blender<br>
</h2>
<p><a href="http://www.blender3d.org/">Blender</a> is an open source 3D
object editor for Windows, Mac and UNIX. These Blender scripts export
scenery created in Blender
to X-Plane v7 .obj format for placement with World-Maker. The scripts
also import existing X-Plane v6 and v7 .obj scenery files into Blender.
All X-Plane object types are supported apart from <code>smoke_black</code>
and <code>smoke_white</code> (which are not directly representable in
Blender).</p>
<h3>Requirements</h3>
<p>Requires <a href="http://www.blender3d.org/Download/">Blender</a>
2.34 or later.</p>
<h3>Installation</h3>
<p>Close Blender if you have it running.</p>
<p>Extract the contents of the zip file to a new (temporary) folder.
Open this folder. Then:</p>
<table style="width: 100%; text-align: left;" border="0" cellpadding="2"
 cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top; text-align: center;">Windows<br>
2000/XP:<br>
      </td>
      <td style="vertical-align: top;">Double-click on the <code>install.cmd</code>
file.<br>
      <small>(assumes that you installed Blender to the default
location)</small>.<br>
      <br>
      </td>
    </tr>
    <tr>
      <td
 style="width: 32px; height: 32px; vertical-align: top; text-align: center;">Windows<br>
98/ME: </td>
      <td>Copy the files to:<br>
      <code>C:\Program Files\Blender
Foundation\Blender\.blender\scripts</code><br>
      <small>(or wherever you installed Blender)</small>.<br>
      <br>
      </td>
    </tr>
    <tr>
      <td
 style="width: 32px; height: 32px; vertical-align: top; text-align: center;">MacOS:
      </td>
      <td>Run the Terminal app, and type:<br>
      <div style="margin-left: 40px;"><code>mkdir -p ~/.blender/scripts</code><br>
      </div>
Close the Terminal app.<br>
Open a Finder window.<br>
The <code>.blender</code> folder is not visible by default
in Finder. Type <samp>scripts</samp> in the search box at the top
right of the Finder window. Identify the <code>scripts</code> folder
that you just created (and which has <code>.blender</code> as it's
parent) in the results list.<br>
Copy the files to the <code>scripts</code> folder.<br>
      <small>(You might want to create an alias of this folder on your
desktop for easier access in the future)</small>.<br>
      </td>
    </tr>
  </tbody>
</table>
<p>Also, copy this file (<code>XPlane2Blender.html</code>) to somewhere
convenient, eg your Desktop. You can now delete the temporary folder.</p>
<p>(Re)start Blender.</p>
<p>On Mac OS, also run the "Console" application that comes with Mac OS
X and which is found under "Utilities".</p>
<h3>Importing</h3>
<p><samp>File -&gt; Import -&gt; X-Plane Scenery</samp></p>
<p style="margin-left: 40px;"><small>Some users report that <samp>X-Plane</samp>
doesn't appear
under <samp>File-&gt;Import</samp>
on their machine. The script can
also be run another way - open <code>XPlaneImport.py</code> in a
Blender text window. Hit <samp><span style="font-weight: bold;">Alt P</span></samp>
to run.</small></p>
<p>Select a .obj file. The scenery is imported at the "3d Cursor"
position. Any problems with the import will be reported in the Console
window as lines starting "Warn" or "Error". The script works quite hard
to optimise for ease and speed of editing in Blender, so can be slow to
import large scenery.</p>
<p>You can import multiple scenery files and re-export them as a single
file. But note that the X-Plane .obj file format only supports the use
of one texture bitmap, so you'll have to create a single texture bitmap
file and remap all the scenery textures onto it before exporting.</p>
<h3>Exporting</h3>
<p><samp>File -&gt; Export -&gt; X-Plane Scenery</samp></p>
<p style="margin-left: 40px;"><small>Some users report that <samp>X-Plane</samp>
doesn't appear
under <samp>File-&gt;Export</samp> on their machine. The script can
also be run another way - open <code>XPlaneExport.py</code>
in a Blender text window. Hit <samp><span style="font-weight: bold;">Alt
P</span></samp>to run.</small></p>
<p>The output filename and location is the same as the current Blender
filename, but with a .obj extension. Always check the Console window
for messages reporting any problems with the export, which are
displayed as lines starting "Warn" or "Error".</p>
<h3>Using Blender to create X-Plane scenery</h3>
<ul>
  <li>Find and open the <code>Custom Scenery</code> folder inside your
    <code>X-System 7</code><span style="font-style: italic;">xx</span>
installation (where <span style="font-style: italic;">xx</span> is the
version number of yourversion of X-Plane - eg <code>X-System 730</code>).</li>
  <li>Create a subfolder with the name of the scenery collection that
you're making.</li>
  <li>Open the new folder.</li>
  <li>Create two new subfolders, called <code>custom objects</code>
and <code>custom object textures</code> (these names must be spelt
correctly).</li>
  <li>Save your Blender file in the <code>custom objects</code> folder
with a descriptive name, eg:<br>
    <div style="margin-left: 40px;"> <code>X-System 730\Custom
Scenery\EGLL\custom objects\house.blend</code> </div>
The X-Plane .obj file will be exported to the same place, eg:<br>
    <div style="margin-left: 40px;"> <code>X-System 730\Custom
Scenery\EGLL\custom objects\house.obj</code> </div>
  </li>
  <li>Use Lamps and Meshes to construct your scenery. No other Blender
object types are exported.</li>
</ul>
<h4>Lamps</h4>
<ul>
  <li>R,G,B settings are exported to X-Plane. All other settings
(including "Energy") are ignored.</li>
  <li>Only Lamps of type "Lamp" are exported to X-Plane. Lamps of types
"Area", "Spot", "Semi" and "Hemi" are ignored. </li>
  <li>Lamps with certain words in their names have special behaviours
when exported to X-Plane:</li>
  <dl>
    <dd><code>Flash</code> - Light flashes.</dd>
    <dd><code>Pulse</code> - Red pulsing light. (R,G,B settings in
Blender are
ignored).</dd>
    <dd><code>Strobe</code> - White strobe light. (R,G,B settings in
Blender are
ignored).</dd>
    <dd><code>Traffic</code> - Cycles red, orange, green. (R,G,B
settings in Blender
are ignored). </dd>
  </dl>
</ul>
<h4>Meshes</h4>
<ul>
  <li>Create faces with 3 or 4 edges (called "<code>tri</code>"s and "<code>quad</code>"s
in
X-Plane).</li>
  <li>In the <samp>Link and Materials</samp> panel:</li>
  <ul>
    <li><samp>Set Smooth</samp> and <samp>Set Solid</samp> control
whether to smooth edges of faces in a mesh. This is useful when using
multiple faces to simulate a curved surface. Only faces that are part
of a Strip (see "Strips" below) will be smoothed when displayed in
X-Plane;<br>
go to "Object Mode", select the mesh&nbsp; and press <samp>Set Smooth</samp>.
The effect is only visible in Blender <samp>3D View</samp> windows
when the <samp>Viewport Shading</samp> button is set to <samp>Solid</samp>
or <samp>Shaded</samp>. </li>
  </ul>
  <li>In the <samp>Texture Face</samp> panel (available in <samp>UV
Face
Select</samp> mode):</li>
  <ul>
    <li><samp>Tex</samp> button controls whether the face has a
texture. Create a .bmp or .png file in an image editor program in the <code>custom
object textures</code> folder. Height and width must be powers of two
(eg 256, 512, etc). Draw all the textures required by the scenery onto
it. Areas of the texture that are coloured magenta or that have Alpha
transparency (png files only) will be transparent when displayed in
X-Plane. Use a <samp>UV Image Editor</samp> window to control mapping
of the
texture bitmap to the face.</li>
    <li><samp>Tiles</samp> button is a hint to X-Plane that the face is
inwards-facing. Use this for
ground-level or inwards-facing faces to prevent nasty artifacts when
displayed in X-Plane.</li>
    <li><samp>Collision</samp> button indicates that the face is
not "landable on" in X-Plane. Faces with 3
edges are never "landable on", irrespective of the state of this
button. Unpress this button only for things like helicopter landing
pads.<br>
      <small>Note: The meaning of this button was changed&nbsp; in
v1.50. Use <a
 href="http://www.marginal.dsl.pipex.com/x-planescenery/collide.txt">this</a>
script to turn <samp>Collision</samp> back on for all faces.</small><br>
    </li>
    <li><samp>Twoside</samp> button controls whether one or both sides
of the face are displayed.</li>
    <li><samp>Alpha</samp><span
 style="font-family: Arial,Helvetica,sans-serif;"> </span>button is a
hint to X-Plane that the face is transparent. Use this for
transparent faces to prevent nasty artifacts when
displayed in X-Plane.</li>
  </ul>
</ul>
<h4>Lines</h4>
<p>Blender doesn't support Lines directly. Use a mesh with one 4-edged
face instead. The pair of vertices at each end of the "line" must be
within 0.1 units of each other. The face must be the only face in its
mesh and must not have a texture assigned to it.</p>
<p>To colour the "line", assign a Material to the face and set the
Material's <samp>Basic Colour</samp> RGB values. Faces not linked to a
Material
will be exported coloured grey.</p>
<h3>Optimising scenery for X-Plane</h3>
<h4>Strips</h4>
<p>As well as basic 3- and 4-edged faces ("<code>tri</code>"s and "<code>quad</code>"s),
X-Plane
supports two compound types - "<code>tri_fan</code>" and "<code>quad_strip</code>".
These are
strips of two or more <code>tri</code>s and <code>quad</code>s that
share common edges.
Because the faces in these strips share common edges, X-Plane and the
underlying OpenGL renderer have a third or a half as much work to
do to render them compared to individual <code>tri</code>s and <code>quad</code>s.
This gives
higher frame rates. </p>
<p>In order for a pair of faces to be considered for inclusion in one
of these strips, the following conditions need to be true: </p>
<ul>
</ul>
<ol>
  <li>The faces must be facing the same way.</li>
  <li>Each pair of faces must share a common edge (apart from the first
and last face).</li>
  <li>Each shared edge must have the same texture bitmap co-ordinates
in
both faces.</li>
</ol>
<p>In practice this means that the texture must be reversed in
alternate faces in the strip. In the case of <code>tri</code>s this
can also be
achieved by mapping a single area of the texture across all the <code>tri</code>s,
with the tip of the <code>tri</code>s at the centre of the texture
area. Use <samp>UVs -&gt; Copy &amp; Paste</samp> from the<samp>
UV/Image Editor</samp> window to automate the creation of strips.<br>
</p>
<ul>
</ul>
<p>See <a
 href="http://www.marginal.dsl.pipex.com/x-planescenery/tutorial/5-optimising.html#Strips">this
tutorial</a> for a fuller explanation. You can import <code>Custom
Scenery\San Bernardino Example\custom
objects\KBSD_example.obj</code> and look at the way that textures are
mapped to the concrete base (<code>quad_strip</code>) and to the sloped
roof (<code>tri_fan</code>) for an example of
these techniques.</p>
<p>These compound types aren't supported directly by Blender. However,
the export script automatically tries to spot when it can use them and
reports in the Console when it succeeds.
</p>
<h4>Level Of Detail</h4>
<p>X-Plane v7 has borrowed the concept of "Level Of Detail" from 3D
games. This works on the principle that objects can be drawn
with less detail when you're viewing them from a large distance.
</p>
<p>Use Layers to draw scenery with multiple Levels Of Detail. Objects
in layers 1-3 are visible in X-Plane at the following distances:
</p>
<div style="margin-left: 40px;">
<table style="width: 100%; text-align: left;" border="0" cellpadding="2"
 cellspacing="2">
  <tbody>
    <tr>
      <td style="width: 10%; text-decoration: underline;">Layer</td>
      <td style="text-decoration: underline;">Distance</td>
    </tr>
    <tr>
      <td style="width: 10%;">1</td>
      <td>&lt; 1000m</td>
    </tr>
    <tr>
      <td style="width: 10%;">2</td>
      <td>1000-4000m</td>
    </tr>
    <tr>
      <td style="width: 10%;">3</td>
      <td>&gt; 4000m</td>
    </tr>
  </tbody>
</table>
</div>
<h3>Using Blender to create 3D cockpits</h3>
<p>
</p>
<p>X-Plane 3D cockpits are just normal scenery objects. However they
shouldn't contain different LODs - so make sure
layers 2 and 3 are empty before exporting. If you want to include
objects in your Blender scene that you don't want to export - eg the
plane fuselage - then put them in layer 4 or greater.</p>
<p>To construct a <code>quad_cockpit</code> face showing moving
cockpit instruments in X-Plane, assign the cockpit panel
texture (i.e. <code>cockpit\-PANELS-\Panel.png</code>) to the face.
You can
use
a <samp>UV Image Editor</samp> window as normal to control mapping
of the
cockpit panel to the face.<br>
</p>
<h3>Tips</h3>
<h4>UI</h4>
<p>Blender has a quirky user interface:</p>
<ul>
  <li>By default, Right mouse button does what you would expect Left
mouse button
to do. I strongly recommend that you change this; drag down the top
menubar to reveal the User Preferences window, select the <samp>View
&amp; Controls </samp>tab and choose <span
 style="font-family: Arial,Helvetica,sans-serif;">S</span><samp>elect
with: Left Mouse</samp>. See <a
 href="http://www.marginal.dsl.pipex.com/x-planescenery/tutorial/1-setup.html#prefs">this
tutorial</a> for a fuller explanation. </li>
  <li>Space does what you would expect Right mouse button to do.</li>
  <li>The user interface is "modal". Buttons and keys do different
things depending on whether you are in "Object", "Edit" or "UV Face
Select" mode. (And I thought modal UIs went out with "vi"). Tab changes
mode. </li>
</ul>
<h4>Tutorials</h4>
<p><a href="http://marginal.org.uk/x-planescenery/">Using Blender to
create X-Plane scenery</a>.</p>
<p><a href="http://dev.pitted.org/%7Ebr/tutorials/blended-cockpits/">Blended
Cockpits</a> by Ben Russell.</p>
<p><a href="http://www.blender3d.org/Education/">General Blender
tutorials</a>.</p>
<h4>More tips</h4>
<p>When creating boxes - eg a house or hangar body - you may find it
easier to create a Mesh "Cube" and delete any faces that are not
required, rather than create each face individually as Mesh "Plane"s.
In general, Meshes containing many faces are easier to edit than many
meshes that contain one face each. So if you're about to create a new
face that shares an edge with an existing mesh, select the shared edge
and press <samp style="font-weight: bold;">E</samp> to "extrude" a new
face, rather than create it as a new standalone Mesh "Plane".<br>
</p>
<p> X-Plane normally only displays one side of an object's face; faces
are
invisible from behind (unless you set press the <samp>Twoside</samp>
button). In order to see which side of a single-sided face is the
visible side:</p>
<ul>
  <li>Go to Edit mode (you need to have an object selected to do this).</li>
  <li>Hit <samp><span style="font-weight: bold;">F9</span></samp> to
see the <samp>Editing</samp> buttons.</li>
  <li>Select <samp>Draw Normals</samp> and set <samp>NSize</samp> to
at least 0.5 in the <samp>Mesh Tools 1</samp> panel. (I also like to
select <samp>Draw Faces</samp> and <samp>Draw Edges</samp>, but
that's up to you). </li>
</ul>
<p>When in edit mode, faces are now drawn with a short light blue line
coming from their centre. The visible side of the face is the side that
you are looking at when the line is pointing <span
 style="text-decoration: underline;">towards</span> you.</p>
<h3>Limitations</h3>
<h4>Import</h4>
<ul>
  <li><code>smoke_black</code> and <code>smoke_white</code> X-Plane
objects are ignored.</li>
  <li>Ambient, Difuse, Specular, Emission and Shiny attributes are
ignored.</li>
  <li>Can't tell which faces should have Alpha transparency.
Transparent faces must be manually marked with the <samp>Alpha</samp>
button in <samp>UV Face Select</samp> mode after import.</li>
</ul>
<h4>Export</h4>
<ul>
  <li>Only Lamps and Mesh Faces (including "lines") are exported.</li>
  <li>All objects must share a single texture (this is a limitation of
the X-Plane .obj file format) apart from cockpit objects which can
additionally use the cockpit panel texture. Multiple textures are not
automagically
merged into one file during the export. </li>
</ul>
<h3>Problems</h3>
<p><a href="mailto:x-plane@marginal.org.uk">Mail me</a> with any
questions, problems etc.</p>
<p>If reporting a problem, please try to send me the the .obj file
(where relevant) and the contents of the Console window. (In Mac OS X,
this is the "Console" program. In Windows this the window titled
"Blender" that looks like a Command Prompt).</p>
<h3>Stuff</h3>
<p>Copyright &copy; 2004 Jonathan Harris
&lt;x-plane&nbsp;at&nbsp;marginal.org.uk&gt;.<br>
Version 1.82<br>
<a href="http://marginal.org.uk/x-planescenery/">http://marginal.org.uk/x-planescenery/</a></p>
<p><!-- Creative Commons License -->
<a rel="license" href="http://creativecommons.org/licenses/by-sa/2.0/"><img
 alt="Creative Commons License"
 src="http://creativecommons.org/images/public/somerights20.gif"
 style="border: 0px solid ;" align="middle"></a> This work is licensed
under a <a rel="license"
 href="http://creativecommons.org/licenses/by-sa/2.0/">Creative Commons
License</a>.
<!-- /Creative Commons License --><!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
xmlns:dc="http://purl.org/dc/elements/1.1/"
xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="">
<dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
<license rdf:resource="http://creativecommons.org/licenses/by-sa/2.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-sa/2.0/">
<permits rdf:resource="http://web.resource.org/cc/Reproduction" />
<permits rdf:resource="http://web.resource.org/cc/Distribution" />
<requires rdf:resource="http://web.resource.org/cc/Notice" />
<requires rdf:resource="http://web.resource.org/cc/Attribution" />
<permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
<requires rdf:resource="http://web.resource.org/cc/ShareAlike" />
</License>
</rdf:RDF>
--></p>
<hr style="width: 100%; height: 2px;">
<table style="width: 100%; text-align: left;" cellpadding="0"
 cellspacing="2">
  <tbody>
    <tr>
      <td style="height: 32px; background-color: rgb(153, 204, 255);">
      <div class="banner">XPlane2Blender</div>
      </td>
    </tr>
  </tbody>
</table>
</body>
</html>
